!function(d){var e;e={init:function(){this._menu(),this._slider(),this._select(),this._rangeSlide(),this._recherche(),this._popup(),this._fixedBar(),this._tabsNavigation(),this._showVideo(),this._filtre(),this._animate(),this._stickyBarTop()},_menu:function(){d(".btn-menu").on("click",function(){d(this).hasClass("open")?(d(this).removeClass("open"),d(".contentMenu").removeClass("active")):(d(this).addClass("open"),d(".contentMenu").addClass("active"))}),d(".btn-connection").on("hover click",function(e){d(this).find("span").slideToggle(100)})},_stickyBarTop:function(){d(".header").height()},_slider:function(){var e,i,n,t,s,o=3,c=d(".items .item").length;function a(){e.css({width:"0%"}),clearTimeout(t),s=0,n=!1,t=setInterval(l,10)}function l(){!1===n&&(s+=1/(o+.1),e.css({width:s+"%"}),100<=s&&(i.slick("slickNext"),a(),clearInterval(t),setTimeout(function(){t=setInterval(l,10)},2e3)))}function r(){d(".listeMoreOption").slick({autoplay:!1,speed:1e3,autoplaySpeed:5e3,dots:!0,arrows:!1,variableWidth:!0})}(i=d(".items")).slick({centerMode:!0,centerPadding:"0",slidesToShow:1,pauseOnDotsHover:!0,cssEase:"ease"}),d(".slick-active").addClass("show-infos"),e=d(".slider-progress .progress"),d(".slick-arrow").on("click",function(){s=0,e.css({width:"0%"})}),d(".items").on("beforeChange",function(e,i,n,t){d(".slick-active").removeClass("show-infos");var s=c-1,o=n===s,a=t===s,l=d(".item.slick-active");o&&l.next(".item").addClass("slick-clone-current"),a&&l.prev(".item").addClass("slick-clone-current")}),d(".items").on("afterChange",function(e,i,n,t){d(".slick-clone-current").removeClass("slick-clone-current"),d(".items").find("div").removeClass("show-infos"),setTimeout(function(){d(".slick-active").addClass("show-infos")},1e3)}),d(".contentSlider").on({mouseenter:function(){n=!0},mouseleave:function(){n=!1}}),a(),d(".listVehicule").slick({slidesToShow:1,variableWidth:!0,infinite:!1,arrows:!1}),d(".listVehicule").on("click","div",function(e){e.stopPropagation();var i=d(this).data("slick-index");d(".slick-slider").slick("slickCurrentSlide")!==i&&d(".slick-slider").slick("slickGoTo",i)}),window.innerWidth<768&&r(),d(window).resize(function(e){window.innerWidth<768?d(".listeMoreOption").hasClass("slick-initialized")||r():d(".listeMoreOption").hasClass("slick-initialized")&&d(".listeMoreOption").slick("unslick")})},_select:function(){d(".formSelect").selectric({optionsItemBuilder:function(e,i,n){return d(i).find("option").eq(n).data("icon")?'<span class="iconSelect"><img src="'+d(i).find("option").eq(n).data("icon")+'"></span>'+e.text:'<span class="space"></span>'+e.text}})},_rangeSlide:function(){d("#slider-range").slider({range:!0,min:0,max:500,values:[75,300],slide:function(e,i){d("#minValue").val(i.values[0]+"DH"),d("#maxValue").val(i.values[1]+"DH")}}),d("#minValue").val(d("#slider-range").slider("values",0)+"DH"),d("#maxValue").val(d("#slider-range").slider("values",1)+"DH")},_recherche:function(){d(".recherche .moreOption").click(function(e){e.preventDefault(),d(".contentRecherche").addClass("opened"),d(".blocMoreOptions").slideDown()}),d(".recherche .closeSearche").click(function(e){e.preventDefault(),d(".contentRecherche").removeClass("opened"),d(".blocMoreOptions").slideUp()})},_popup:function(){d(".plus-detail,.demande-devis").magnificPopup({type:"inline",fixedContentPos:!1,fixedBgPos:!0,overflowY:"auto",closeBtnInside:!0,preloader:!1,midClick:!0,removalDelay:300,mainClass:"my-mfp-zoom-in"})},_fixedBar:function(){d(window).scroll(function(){100<=d(window).scrollTop()?d(".innerFooter").addClass("fixed"):d(".innerFooter").removeClass("fixed")})},_tabsNavigation:function(){d(".rubTech").on("click",function(e){e.preventDefault(),d(this).hasClass("active")||(d(".rubTech").removeClass("active"),d(this).addClass("active"),dist=d(this).attr("href"),d(".boxInfos").hide(),d(dist).show())}),d(".detailInfosVehicule .linkDemandeDevis").on("click",function(e){e.preventDefault(),d("html, body").animate({scrollTop:d(d.attr(this,"href")).offset().top},500)})},_showVideo:function(){0<d(".image-video").length&&d(".image-video").each(function(e){d(this).on("click",function(){var e=d(this).next(),i=d(e).attr("data-src");i+="?autoplay=1&enablejsapi=1&version=3&";var n=d(e).attr("data-height"),t=d(this).find("img").height();d(e).css("height",t),d(this).hide();var s=document.createElement("iframe");d(s).attr("src",i),d(s).attr("height",n),d(s).attr("frameborder",0),d(s).attr("allow","autoplay"),d(s).attr("allowfullscreen","allowfullscreen"),d(e).html(s),d(e).show(),d(this).parent().parent()})})},_filtre:function(){d(".filtreBtn").on("click",function(e){e.preventDefault(),d(this).next().slideToggle()})},_animate:function(){var n,t;function e(){n=document.querySelectorAll(".hiddenElement"),t=window.innerHeight}function i(){for(var e=0;e<n.length;e++){var i=n[e];n[e].getBoundingClientRect().top-t<=0&&(i.classList.add("fade-in-element"),i.classList.remove("hiddenElement"))}}window.addEventListener("scroll",i),window.addEventListener("resize",e),e(),i()}},d(document).ready(function(){e.init()}),d(window).on("load",function(){}),d(window).resize(function(){}),d(window).scroll(function(){})}(jQuery);
//# sourceMappingURL=data:application/json;charset=utf8;base64,eyJ2ZXJzaW9uIjozLCJzb3VyY2VzIjpbImpxdWVyeS5zY3JpcHRzLm1pbi5qcyJdLCJuYW1lcyI6WyIkIiwiYXBwIiwiaW5pdCIsInRoaXMiLCJfbWVudSIsIl9zbGlkZXIiLCJfc2VsZWN0IiwiX3JhbmdlU2xpZGUiLCJfcmVjaGVyY2hlIiwiX3BvcHVwIiwiX2ZpeGVkQmFyIiwiX3RhYnNOYXZpZ2F0aW9uIiwiX3Nob3dWaWRlbyIsIl9maWx0cmUiLCJfYW5pbWF0ZSIsIl9zdGlja3lCYXJUb3AiLCJvbiIsImhhc0NsYXNzIiwicmVtb3ZlQ2xhc3MiLCJhZGRDbGFzcyIsImUiLCJmaW5kIiwic2xpZGVUb2dnbGUiLCJoZWlnaHQiLCIkYmFyIiwiJHNsaWNrIiwiaXNQYXVzZSIsInRpY2siLCJwZXJjZW50VGltZSIsInRpbWUiLCJuYnIiLCJsZW5ndGgiLCJzdGFydFByb2dyZXNzYmFyIiwiY3NzIiwid2lkdGgiLCJjbGVhclRpbWVvdXQiLCJzZXRJbnRlcnZhbCIsImludGVydmFsIiwic2xpY2siLCJjbGVhckludGVydmFsIiwic2V0VGltZW91dCIsIm1vYmlsZU9ubHlTbGlkZXIiLCJhdXRvcGxheSIsInNwZWVkIiwiYXV0b3BsYXlTcGVlZCIsImRvdHMiLCJhcnJvd3MiLCJ2YXJpYWJsZVdpZHRoIiwiY2VudGVyTW9kZSIsImNlbnRlclBhZGRpbmciLCJzbGlkZXNUb1Nob3ciLCJwYXVzZU9uRG90c0hvdmVyIiwiY3NzRWFzZSIsImN1cnJlbnRTbGlkZSIsIm5leHRTbGlkZSIsInNsaWRlQ291bnQiLCJuZXh0U2xpZGVJc0ZpcnN0IiwibmV4dFNsaWRlSXNMYXN0IiwiJGFjdGl2ZVNsaWRlIiwibmV4dCIsInByZXYiLCJtb3VzZWVudGVyIiwibW91c2VsZWF2ZSIsImluZmluaXRlIiwic3RvcFByb3BhZ2F0aW9uIiwiaW5kZXgiLCJkYXRhIiwid2luZG93IiwiaW5uZXJXaWR0aCIsInJlc2l6ZSIsInNlbGVjdHJpYyIsIm9wdGlvbnNJdGVtQnVpbGRlciIsIml0ZW1EYXRhIiwiZWxlbWVudCIsImVxIiwidGV4dCIsInNsaWRlciIsInJhbmdlIiwibWluIiwibWF4IiwidmFsdWVzIiwic2xpZGUiLCJldmVudCIsInVpIiwidmFsIiwiY2xpY2siLCJwcmV2ZW50RGVmYXVsdCIsInNsaWRlRG93biIsInNsaWRlVXAiLCJtYWduaWZpY1BvcHVwIiwidHlwZSIsImZpeGVkQ29udGVudFBvcyIsImZpeGVkQmdQb3MiLCJvdmVyZmxvd1kiLCJjbG9zZUJ0bkluc2lkZSIsInByZWxvYWRlciIsIm1pZENsaWNrIiwicmVtb3ZhbERlbGF5IiwibWFpbkNsYXNzIiwic2Nyb2xsIiwic2Nyb2xsVG9wIiwiZGlzdCIsImF0dHIiLCJoaWRlIiwic2hvdyIsImFuaW1hdGUiLCJvZmZzZXQiLCJ0b3AiLCJlYWNoIiwidmlkZW9fZnJhbWUiLCJ2aWRlb191cmwiLCJ2aWRlb19oZWlnaHQiLCJoZWlnaHRpbWFnZSIsImlmcmFtZSIsImRvY3VtZW50IiwiY3JlYXRlRWxlbWVudCIsImh0bWwiLCJwYXJlbnQiLCJlbGVtZW50cyIsIndpbmRvd0hlaWdodCIsInF1ZXJ5U2VsZWN0b3JBbGwiLCJpbm5lckhlaWdodCIsImNoZWNrUG9zaXRpb24iLCJpIiwiZ2V0Qm91bmRpbmdDbGllbnRSZWN0IiwiY2xhc3NMaXN0IiwiYWRkIiwicmVtb3ZlIiwiYWRkRXZlbnRMaXN0ZW5lciIsInJlYWR5IiwialF1ZXJ5Il0sIm1hcHBpbmdzIjoiQ0FBQyxTQUFTQSxHQUNOLElBQ0lDLEVBQ0pBLEVBQU0sQ0FDRkMsS0FBTSxXQUNGQyxLQUFLQyxRQUNMRCxLQUFLRSxVQUNMRixLQUFLRyxVQUNMSCxLQUFLSSxjQUNMSixLQUFLSyxhQUNMTCxLQUFLTSxTQUNMTixLQUFLTyxZQUNMUCxLQUFLUSxrQkFDTFIsS0FBS1MsYUFDTFQsS0FBS1UsVUFDTFYsS0FBS1csV0FDTFgsS0FBS1ksaUJBSVRYLE1BQU8sV0FDSEosRUFBRSxhQUFhZ0IsR0FBRyxRQUFRLFdBQ25CaEIsRUFBRUcsTUFBTWMsU0FBUyxTQUNoQmpCLEVBQUVHLE1BQU1lLFlB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QUFFNkcsR0FBYU8sS0FBS0gsR0FDcEJqSCxFQUFFNkcsR0FBYUwsT0FDRHhHLEVBQUVHLE1BQU1rSCxTQUFTQSxjQU0vQ3hHLFFBQVEsV0FDSmIsRUFBRSxjQUFjZ0IsR0FBRyxRQUFRLFNBQVNJLEdBQ2hDQSxFQUFFa0UsaUJBQ0Z0RixFQUFFRyxNQUFNd0QsT0FBT3JDLGlCQUd2QlIsU0FBUyxXQUNMLElBQUl3RyxFQUNBQyxFQUVKLFNBQVNySCxJQUNMb0gsRUFBV0osU0FBU00saUJBQWlCLGtCQUNyQ0QsRUFBZXBELE9BQU9zRCxZQUcxQixTQUFTQyxJQUNMLElBQUssSUFBSUMsRUFBSSxFQUFHQSxFQUFJTCxFQUFTdkYsT0FBUTRGLElBQUssQ0FDMUMsSUFBSWxELEVBQVU2QyxFQUFTSyxHQUNETCxFQUFTSyxHQUFHQyx3QkFBd0JqQixJQUVwQ1ksR0FBZ0IsSUFDbEM5QyxFQUFRb0QsVUFBVUMsSUFBSSxtQkFDdEJyRCxFQUFRb0QsVUFBVUUsT0FBTyxtQkFLakM1RCxPQUFPNkQsaUJBQWlCLFNBQVVOLEdBQ2xDdkQsT0FBTzZELGlCQUFpQixTQUFVOUgsR0FFbENBLElBQ0F3SCxNQUlSMUgsRUFBR2tILFVBQVdlLE1BQU0sV0FDaEJoSSxFQUFJQyxTQUdSRixFQUFFbUUsUUFBUW5ELEdBQUcsT0FBTyxjQUdwQmhCLEVBQUVtRSxRQUFRRSxPQUFPLGNBRWpCckUsRUFBRW1FLFFBQVFnQyxPQUFPLGNBN1VyQixDQWlWRStCIiwiZmlsZSI6ImpxdWVyeS5zY3JpcHRzLm1pbi5qcyIsInNvdXJjZXNDb250ZW50IjpbIihmdW5jdGlvbigkKSB7XHJcbiAgICB2YXIgY3VycmVudEl0ZW07XHJcbiAgICB2YXIgYXBwO1xyXG4gICAgYXBwID0ge1xyXG4gICAgICAgIGluaXQ6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICB0aGlzLl9tZW51KCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3NsaWRlcigpO1xyXG4gICAgICAgICAgICB0aGlzLl9zZWxlY3QoKTtcclxuICAgICAgICAgICAgdGhpcy5fcmFuZ2VTbGlkZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9yZWNoZXJjaGUoKTtcclxuICAgICAgICAgICAgdGhpcy5fcG9wdXAoKTtcclxuICAgICAgICAgICAgdGhpcy5fZml4ZWRCYXIoKTtcclxuICAgICAgICAgICAgdGhpcy5fdGFic05hdmlnYXRpb24oKTtcclxuICAgICAgICAgICAgdGhpcy5fc2hvd1ZpZGVvKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX2ZpbHRyZSgpO1xyXG4gICAgICAgICAgICB0aGlzLl9hbmltYXRlKCk7XHJcbiAgICAgICAgICAgIHRoaXMuX3N0aWNreUJhclRvcCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICB9LFxyXG5cclxuICAgICAgICBfbWVudTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmJ0bi1tZW51Jykub24oJ2NsaWNrJyxmdW5jdGlvbigpe1xyXG4gICAgICAgICAgICAgICAgaWYoJCh0aGlzKS5oYXNDbGFzcygnb3BlbicpKXtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLnJlbW92ZUNsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmNvbnRlbnRNZW51JykucmVtb3ZlQ2xhc3MoJ2FjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKHRoaXMpLmFkZENsYXNzKCdvcGVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5jb250ZW50TWVudVwiKS5hZGRDbGFzcygnYWN0aXZlJyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKFwiLmJ0bi1jb25uZWN0aW9uXCIpLm9uKCdob3ZlciBjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLmZpbmQoJ3NwYW4nKS5zbGlkZVRvZ2dsZSgxMDApO1xyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgfSxcclxuICAgICAgICBfc3RpY2t5QmFyVG9wOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgdmFyIGggPSAkKCcuaGVhZGVyJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgIC8vIHZhciBuYXZIZWlnaHQgPSAkKCcubmF2TWVudScpLmhlaWdodCgpO1xyXG4gICAgICAgICAgICAvLyAkKHdpbmRvdykuc2Nyb2xsKGZ1bmN0aW9uKGV2ZW50KSB7XHJcbiAgICAgICAgICAgIC8vICAgICB2YXIgeSA9ICQodGhpcykuc2Nyb2xsVG9wKCk7XHJcbiAgICAgICAgICAgIC8vICAgICBpZiAoeSA+PSBoKVxyXG4gICAgICAgICAgICAvLyAgICAgICAgICQoJy5oZWFkZXInKS5hZGRDbGFzcygnZml4ZWQnKTtcclxuICAgICAgICAgICAgLy8gICAgIGVsc2VcclxuICAgICAgICAgICAgLy8gICAgICAgICAkKCcuaGVhZGVyJykucmVtb3ZlQ2xhc3MoJ2ZpeGVkJyk7XHJcbiAgICAgICAgICAgIC8vIH0pO1xyXG5cclxuICAgICAgICB9LFxyXG4gICAgICAgIF9zbGlkZXI6IGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIHZhciB0aW1lID0gMztcclxuICAgICAgICAgICAgdmFyICRiYXIsXHJcbiAgICAgICAgICAgICAgICAkc2xpY2ssXHJcbiAgICAgICAgICAgICAgICBpc1BhdXNlLFxyXG4gICAgICAgICAgICAgICAgdGljayxcclxuICAgICAgICAgICAgICAgIHBlcmNlbnRUaW1lO1xyXG4gICAgICAgICAgICB2YXIgbmJyID0gJCgnLml0ZW1zIC5pdGVtJykubGVuZ3RoO1xyXG4gICAgICAgICAgICAkc2xpY2sgPSAkKCcuaXRlbXMnKTtcclxuICAgICAgICAgICAgJHNsaWNrLnNsaWNrKHtcclxuICAgICAgICAgICAgICAgIGNlbnRlck1vZGU6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBjZW50ZXJQYWRkaW5nOiAnMCcsXHJcbiAgICAgICAgICAgICAgICBzbGlkZXNUb1Nob3c6IDEsXHJcbiAgICAgICAgICAgICAgICBwYXVzZU9uRG90c0hvdmVyOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgY3NzRWFzZTogJ2Vhc2UnLFxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJCgnLnNsaWNrLWFjdGl2ZScpLmFkZENsYXNzKFwic2hvdy1pbmZvc1wiKTtcclxuICAgICAgICAgICAgLy9jb25zb2xlLmxvZygkc2xpY2subGVuZ3RoKTtcclxuICAgICAgICAgICAgLy8gcHJvZ3Jlc3MgYmFyZSBcclxuICAgICAgICAgICAgJGJhciA9ICQoJy5zbGlkZXItcHJvZ3Jlc3MgLnByb2dyZXNzJyk7XHJcbiAgICAgICAgICAgICQoJy5zbGljay1hcnJvdycpLm9uKCdjbGljaycsIGZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICAgICBwZXJjZW50VGltZSA9IDA7XHJcbiAgICAgICAgICAgICAgICAkYmFyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICAgICAgd2lkdGg6IDArJyUnIFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICQoJy5pdGVtcycpLm9uKCdiZWZvcmVDaGFuZ2UnLCBmdW5jdGlvbihlLCBzbGljaywgY3VycmVudFNsaWRlLCBuZXh0U2xpZGUpIHtcclxuICAgICAgICAgICAgICAgICQoJy5zbGljay1hY3RpdmUnKS5yZW1vdmVDbGFzcyhcInNob3ctaW5mb3NcIik7XHJcbiAgICAgICAgICAgICAgICB2YXIgc2xpZGVDb3VudCA9IG5iciAtIDE7XHJcbiAgICAgICAgICAgICAgICB2YXIgbmV4dFNsaWRlSXNGaXJzdCA9IGN1cnJlbnRTbGlkZSA9PT0gc2xpZGVDb3VudDtcclxuICAgICAgICAgICAgICAgIHZhciBuZXh0U2xpZGVJc0xhc3QgID0gbmV4dFNsaWRlID09PSBzbGlkZUNvdW50O1xyXG4gICAgICAgICAgICAgICAgdmFyICRhY3RpdmVTbGlkZSA9ICQoJy5pdGVtLnNsaWNrLWFjdGl2ZScpO1xyXG4gICAgICAgICAgICAgICAgaWYgKG5leHRTbGlkZUlzRmlyc3QpIHtcclxuICAgICAgICAgICAgICAgICAgJGFjdGl2ZVNsaWRlLm5leHQoJy5pdGVtJykuYWRkQ2xhc3MoJ3NsaWNrLWNsb25lLWN1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIGlmIChuZXh0U2xpZGVJc0xhc3QpIHtcclxuICAgICAgICAgICAgICAgICAgJGFjdGl2ZVNsaWRlLnByZXYoJy5pdGVtJykuYWRkQ2xhc3MoJ3NsaWNrLWNsb25lLWN1cnJlbnQnKTtcclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAvLyBSZW1vdmUgeW91ciBjdXN0b20gYWN0aXZlIGNsYXNzIGFjdGl2ZSBzbGlkZSBmaW5pc2hlZFxyXG4gICAgICAgICAgICAgICQoJy5pdGVtcycpLm9uKCdhZnRlckNoYW5nZScsIGZ1bmN0aW9uKGUsIHNsaWNrLCBjdXJyZW50U2xpZGUsIG5leHRTbGlkZSkge1xyXG4gICAgICAgICAgICAgICAgJCgnLnNsaWNrLWNsb25lLWN1cnJlbnQnKS5yZW1vdmVDbGFzcygnc2xpY2stY2xvbmUtY3VycmVudCcpO1xyXG4gICAgICAgICAgICAgICAgLy9jb25zb2xlLmxvZyhjdXJyZW50U2xpZGUpO1xyXG4gICAgICAgICAgICAgICAgJCgnLml0ZW1zJykuZmluZCgnZGl2JykucmVtb3ZlQ2xhc3MoXCJzaG93LWluZm9zXCIpO1xyXG4gICAgICAgICAgICAgICAgc2V0VGltZW91dChmdW5jdGlvbigpeyAkKCcuc2xpY2stYWN0aXZlJykuYWRkQ2xhc3MoXCJzaG93LWluZm9zXCIpOyB9LCAxMDAwKTtcclxuICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgfSlcclxuICAgICAgICAgICAgJCgnLmNvbnRlbnRTbGlkZXInKS5vbih7XHJcbiAgICAgICAgICAgICAgICBtb3VzZWVudGVyOiBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGlzUGF1c2UgPSB0cnVlO1xyXG4gICAgICAgICAgICAgICAgfSxcclxuICAgICAgICAgICAgICAgIG1vdXNlbGVhdmU6IGZ1bmN0aW9uKCkge1xyXG4gICAgICAgICAgICAgICAgaXNQYXVzZSA9IGZhbHNlO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgZnVuY3Rpb24gc3RhcnRQcm9ncmVzc2JhcigpIHtcclxuICAgICAgICAgICAgICAgIHJlc2V0UHJvZ3Jlc3NiYXIoKTtcclxuICAgICAgICAgICAgICAgIHBlcmNlbnRUaW1lID0gMDtcclxuICAgICAgICAgICAgICAgIGlzUGF1c2UgPSBmYWxzZTtcclxuICAgICAgICAgICAgICAgIHRpY2sgPSBzZXRJbnRlcnZhbChpbnRlcnZhbCwgMTApO1xyXG4gICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIFxyXG4gICAgICAgICAgICBmdW5jdGlvbiBpbnRlcnZhbCgpIHtcclxuICAgICAgICAgICAgICAgIGlmKGlzUGF1c2UgPT09IGZhbHNlKSB7XHJcbiAgICAgICAgICAgICAgICBwZXJjZW50VGltZSArPSAxIC8gKHRpbWUrMC4xKTtcclxuICAgICAgICAgICAgICAgICRiYXIuY3NzKHtcclxuICAgICAgICAgICAgICAgICAgICB3aWR0aDogcGVyY2VudFRpbWUrXCIlXCJcclxuICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgaWYocGVyY2VudFRpbWUgPj0gMTAwKVxyXG4gICAgICAgICAgICAgICAgICAgIHtcclxuICAgICAgICAgICAgICAgICAgICAkc2xpY2suc2xpY2soJ3NsaWNrTmV4dCcpO1xyXG4gICAgICAgICAgICAgICAgICAgIHN0YXJ0UHJvZ3Jlc3NiYXIoKTtcclxuICAgICAgICAgICAgICAgICAgICBjbGVhckludGVydmFsKHRpY2spO1xyXG4gICAgICAgICAgICAgICAgICAgIHNldFRpbWVvdXQoZnVuY3Rpb24oKXsgdGljayA9IHNldEludGVydmFsKGludGVydmFsLCAxMCk7IH0sIDIwMDApO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIHJlc2V0UHJvZ3Jlc3NiYXIoKSB7XHJcbiAgICAgICAgICAgICAgICAkYmFyLmNzcyh7XHJcbiAgICAgICAgICAgICAgICB3aWR0aDogMCsnJScgXHJcbiAgICAgICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgICAgIGNsZWFyVGltZW91dCh0aWNrKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgc3RhcnRQcm9ncmVzc2JhcigpO1xyXG5cclxuICAgICAgICAgICAgJCgnLmxpc3RWZWhpY3VsZScpLnNsaWNrKHtcclxuICAgICAgICAgICAgICAgIHNsaWRlc1RvU2hvdzogMSxcclxuICAgICAgICAgICAgICAgIHZhcmlhYmxlV2lkdGg6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBpbmZpbml0ZTogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBhcnJvd3M6IGZhbHNlXHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKCcubGlzdFZlaGljdWxlJykub24oJ2NsaWNrJywgJ2RpdicsIGZ1bmN0aW9uKGUpXHJcbiAgICAgICAgICAgICAgICB7XHJcbiAgICAgICAgICAgICAgICAgICAgZS5zdG9wUHJvcGFnYXRpb24oKTtcclxuICAgICAgICAgICAgICAgICAgICB2YXIgaW5kZXggPSAkKHRoaXMpLmRhdGEoXCJzbGljay1pbmRleFwiKTtcclxuICAgICAgICAgICAgICAgICAgICBpZiAoJCgnLnNsaWNrLXNsaWRlcicpLnNsaWNrKCdzbGlja0N1cnJlbnRTbGlkZScpICE9PSBpbmRleCkge1xyXG4gICAgICAgICAgICAgICAgICAgICQoJy5zbGljay1zbGlkZXInKS5zbGljaygnc2xpY2tHb1RvJywgaW5kZXgpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgICAgIH0pO1xyXG5cclxuICAgICAgICAgICAgLy8gc2xpZGUganVzdGUgb24gbWliaWxlXHJcbiAgICAgICAgICAgIGZ1bmN0aW9uIG1vYmlsZU9ubHlTbGlkZXIoKSB7XHJcbiAgICAgICAgICAgICAgICAkKCcubGlzdGVNb3JlT3B0aW9uJykuc2xpY2soe1xyXG4gICAgICAgICAgICAgICAgICAgIGF1dG9wbGF5OiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICBzcGVlZDogMTAwMCxcclxuICAgICAgICAgICAgICAgICAgICBhdXRvcGxheVNwZWVkOiA1MDAwLFxyXG4gICAgICAgICAgICAgICAgICAgIGRvdHM6IHRydWUsXHJcbiAgICAgICAgICAgICAgICAgICAgYXJyb3dzOiBmYWxzZSxcclxuICAgICAgICAgICAgICAgICAgICB2YXJpYWJsZVdpZHRoOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgIG1vYmlsZU9ubHlTbGlkZXIoKTtcclxuICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICAkKHdpbmRvdykucmVzaXplKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgaWYod2luZG93LmlubmVyV2lkdGggPCA3NjgpIHtcclxuICAgICAgICAgICAgICAgICAgICBpZighJCgnLmxpc3RlTW9yZU9wdGlvbicpLmhhc0NsYXNzKCdzbGljay1pbml0aWFsaXplZCcpKXtcclxuICAgICAgICAgICAgICAgICAgICAgICAgbW9iaWxlT25seVNsaWRlcigpO1xyXG4gICAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICB9ZWxzZXtcclxuICAgICAgICAgICAgICAgICAgICBpZigkKCcubGlzdGVNb3JlT3B0aW9uJykuaGFzQ2xhc3MoJ3NsaWNrLWluaXRpYWxpemVkJykpe1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKCcubGlzdGVNb3JlT3B0aW9uJykuc2xpY2soJ3Vuc2xpY2snKTtcclxuICAgICAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3NlbGVjdDogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmZvcm1TZWxlY3QnKS5zZWxlY3RyaWMoe1xyXG4gICAgICAgICAgICAgICAgb3B0aW9uc0l0ZW1CdWlsZGVyOiBmdW5jdGlvbihpdGVtRGF0YSwgZWxlbWVudCwgaW5kZXgpIHtcclxuICAgICAgICAgICAgICAgICAgICAvLyBjb25zb2xlLmxvZygkKGVsZW1lbnQpLmZpbmQoJ29wdGlvbicpLmVxKGluZGV4KS5kYXRhKCdpY29uJykpO1xyXG4gICAgICAgICAgICAgICAgICAgIHJldHVybiAkKGVsZW1lbnQpLmZpbmQoJ29wdGlvbicpLmVxKGluZGV4KS5kYXRhKCdpY29uJykgPyAnPHNwYW4gY2xhc3M9XCJpY29uU2VsZWN0XCI+PGltZyBzcmM9XCInKyQoZWxlbWVudCkuZmluZCgnb3B0aW9uJykuZXEoaW5kZXgpLmRhdGEoJ2ljb24nKSsnXCI+PC9zcGFuPicgKyBpdGVtRGF0YS50ZXh0IDogJzxzcGFuIGNsYXNzPVwic3BhY2VcIj48L3NwYW4+JyArIGl0ZW1EYXRhLnRleHQ7XHJcbiAgICAgICAgICAgICAgICAgICAgXHJcbiAgICAgICAgICAgICAgICAgIH1cclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfcmFuZ2VTbGlkZTogZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCggXCIjc2xpZGVyLXJhbmdlXCIgKS5zbGlkZXIoe1xyXG4gICAgICAgICAgICAgICAgcmFuZ2U6IHRydWUsXHJcbiAgICAgICAgICAgICAgICBtaW46IDAsXHJcbiAgICAgICAgICAgICAgICBtYXg6IDUwMCxcclxuICAgICAgICAgICAgICAgIHZhbHVlczogWyA3NSwgMzAwIF0sXHJcbiAgICAgICAgICAgICAgICBzbGlkZTogZnVuY3Rpb24oIGV2ZW50LCB1aSApIHtcclxuICAgICAgICAgICAgICAgICAgJCggXCIjbWluVmFsdWVcIiApLnZhbCggIHVpLnZhbHVlc1sgMCBdICsgXCJESFwiKTtcclxuICAgICAgICAgICAgICAgICAgJCggXCIjbWF4VmFsdWVcIiApLnZhbCggIHVpLnZhbHVlc1sgMSBdICsgXCJESFwiICk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgICAgJCggXCIjbWluVmFsdWVcIiApLnZhbCggJCggXCIjc2xpZGVyLXJhbmdlXCIgKS5zbGlkZXIoIFwidmFsdWVzXCIsIDAgKSArIFwiREhcIiApO1xyXG4gICAgICAgICAgICAgICQoIFwiI21heFZhbHVlXCIgKS52YWwoICQoIFwiI3NsaWRlci1yYW5nZVwiICkuc2xpZGVyKCBcInZhbHVlc1wiLCAxICkgKyBcIkRIXCIgKTtcclxuICAgICAgICB9LFxyXG4gICAgICAgIF9yZWNoZXJjaGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJChcIi5yZWNoZXJjaGUgLm1vcmVPcHRpb25cIikuY2xpY2soZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAkKFwiLmNvbnRlbnRSZWNoZXJjaGVcIikuYWRkQ2xhc3MoXCJvcGVuZWRcIik7XHJcbiAgICAgICAgICAgICAgICAkKCcuYmxvY01vcmVPcHRpb25zJykuc2xpZGVEb3duKCk7XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAkKFwiLnJlY2hlcmNoZSAuY2xvc2VTZWFyY2hlXCIpLmNsaWNrKGZ1bmN0aW9uKGUpe1xyXG4gICAgICAgICAgICAgICAgZS5wcmV2ZW50RGVmYXVsdCgpO1xyXG4gICAgICAgICAgICAgICAgJChcIi5jb250ZW50UmVjaGVyY2hlXCIpLnJlbW92ZUNsYXNzKFwib3BlbmVkXCIpO1xyXG4gICAgICAgICAgICAgICAgJCgnLmJsb2NNb3JlT3B0aW9ucycpLnNsaWRlVXAoKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfcG9wdXA6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLnBsdXMtZGV0YWlsLC5kZW1hbmRlLWRldmlzJykubWFnbmlmaWNQb3B1cCh7XHJcbiAgICAgICAgICAgICAgICB0eXBlOiAnaW5saW5lJyxcclxuICAgICAgICBcclxuICAgICAgICAgICAgICAgIGZpeGVkQ29udGVudFBvczogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBmaXhlZEJnUG9zOiB0cnVlLFxyXG4gICAgICAgIFxyXG4gICAgICAgICAgICAgICAgb3ZlcmZsb3dZOiAnYXV0bycsXHJcbiAgICAgICAgXHJcbiAgICAgICAgICAgICAgICBjbG9zZUJ0bkluc2lkZTogdHJ1ZSxcclxuICAgICAgICAgICAgICAgIHByZWxvYWRlcjogZmFsc2UsXHJcbiAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIG1pZENsaWNrOiB0cnVlLFxyXG4gICAgICAgICAgICAgICAgcmVtb3ZhbERlbGF5OiAzMDAsXHJcbiAgICAgICAgICAgICAgICBtYWluQ2xhc3M6ICdteS1tZnAtem9vbS1pbidcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfZml4ZWRCYXI6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpIHsgICAgXHJcbiAgICAgICAgICAgICAgICB2YXIgc2Nyb2xsID0gJCh3aW5kb3cpLnNjcm9sbFRvcCgpO1xyXG4gICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgIGlmIChzY3JvbGwgPj0gMTAwKSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5pbm5lckZvb3RlclwiKS5hZGRDbGFzcyhcImZpeGVkXCIpO1xyXG4gICAgICAgICAgICAgICAgfSBlbHNlIHtcclxuICAgICAgICAgICAgICAgICAgICAkKFwiLmlubmVyRm9vdGVyXCIpLnJlbW92ZUNsYXNzKFwiZml4ZWRcIik7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH0pO1xyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX3RhYnNOYXZpZ2F0aW9uOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgICQoXCIucnViVGVjaFwiKS5vbihcImNsaWNrXCIsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICBpZighJCh0aGlzKS5oYXNDbGFzcyhcImFjdGl2ZVwiKSl7XHJcbiAgICAgICAgICAgICAgICAgICAgJChcIi5ydWJUZWNoXCIpLnJlbW92ZUNsYXNzKFwiYWN0aXZlXCIpO1xyXG4gICAgICAgICAgICAgICAgICAgICQodGhpcykuYWRkQ2xhc3MoXCJhY3RpdmVcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgZGlzdCA9ICQodGhpcykuYXR0cihcImhyZWZcIik7XHJcbiAgICAgICAgICAgICAgICAgICAgJCgnLmJveEluZm9zJykuaGlkZSgpO1xyXG4gICAgICAgICAgICAgICAgICAgICQoZGlzdCkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgfVxyXG4gICAgICAgICAgICB9KTtcclxuICAgICAgICAgICAgJChcIi5kZXRhaWxJbmZvc1ZlaGljdWxlIC5saW5rRGVtYW5kZURldmlzXCIpLm9uKFwiY2xpY2tcIixmdW5jdGlvbihlKXtcclxuICAgICAgICAgICAgICAgIGUucHJldmVudERlZmF1bHQoKTtcclxuICAgICAgICAgICAgICAgICQoJ2h0bWwsIGJvZHknKS5hbmltYXRlKHtcclxuICAgICAgICAgICAgICAgICAgICBzY3JvbGxUb3A6ICQoJC5hdHRyKHRoaXMsICdocmVmJykpLm9mZnNldCgpLnRvcFxyXG4gICAgICAgICAgICAgICAgfSwgNTAwKTtcclxuICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgfSxcclxuICAgICAgICBfc2hvd1ZpZGVvOmZ1bmN0aW9uKCl7XHJcbiAgICAgICAgICAgIGlmKCQoJy5pbWFnZS12aWRlbycpLmxlbmd0aCA+IDApIHtcclxuICAgICAgICAgICAgICAgICQoIFwiLmltYWdlLXZpZGVvXCIgKS5lYWNoKGZ1bmN0aW9uKGluZGV4KSB7XHJcbiAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5vbignY2xpY2snLCBmdW5jdGlvbigpIHtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvX2ZyYW1lID0gJCh0aGlzKS5uZXh0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciB2aWRlb191cmwgPSAkKHZpZGVvX2ZyYW1lKS5hdHRyKCdkYXRhLXNyYycpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICB2aWRlb191cmwgPSB2aWRlb191cmwrXCI/YXV0b3BsYXk9MSZlbmFibGVqc2FwaT0xJnZlcnNpb249MyZcIjtcclxuICAgICAgICAgICAgICAgICAgICAgICAgdmFyIHZpZGVvX2hlaWdodCA9ICQodmlkZW9fZnJhbWUpLmF0dHIoJ2RhdGEtaGVpZ2h0Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBoZWlnaHRpbWFnZSA9ICQodGhpcykuZmluZCgnaW1nJykuaGVpZ2h0KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodmlkZW9fZnJhbWUpLmNzcyhcImhlaWdodFwiLCBoZWlnaHRpbWFnZSk7XHJcblxyXG4gICAgICAgICAgICAgICAgICAgICAgICBcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh0aGlzKS5oaWRlKCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIHZhciBpZnJhbWUgPSBkb2N1bWVudC5jcmVhdGVFbGVtZW50KCdpZnJhbWUnKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChpZnJhbWUpLmF0dHIoJ3NyYycsIHZpZGVvX3VybCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQoaWZyYW1lKS5hdHRyKCdoZWlnaHQnLCB2aWRlb19oZWlnaHQpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGlmcmFtZSkuYXR0cignZnJhbWVib3JkZXInLCAwKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJChpZnJhbWUpLmF0dHIoJ2FsbG93JywgJ2F1dG9wbGF5Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIC8vJChpZnJhbWUpLnByb3AoJ2FsbG93ZnVsbHNjcmVlbicpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICAkKGlmcmFtZSkuYXR0cignYWxsb3dmdWxsc2NyZWVuJywnYWxsb3dmdWxsc2NyZWVuJyk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgICQodmlkZW9fZnJhbWUpLmh0bWwoaWZyYW1lKTtcclxuICAgICAgICAgICAgICAgICAgICAgICAgJCh2aWRlb19mcmFtZSkuc2hvdygpO1xyXG4gICAgICAgICAgICAgICAgICAgICAgICBjdXJyZW50SXRlbSA9ICQodGhpcykucGFyZW50KCkucGFyZW50KCk7XHJcbiAgICAgICAgICAgICAgICAgICAgICAgIFxyXG4gICAgICAgICAgICAgICAgICAgIH0pO1xyXG4gICAgICAgICAgICAgICAgfSk7XHJcbiAgICAgICAgICAgIH1cclxuICAgICAgICB9LFxyXG4gICAgICAgIF9maWx0cmU6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgJCgnLmZpbHRyZUJ0bicpLm9uKCdjbGljaycsZnVuY3Rpb24oZSl7XHJcbiAgICAgICAgICAgICAgICBlLnByZXZlbnREZWZhdWx0KCk7XHJcbiAgICAgICAgICAgICAgICAkKHRoaXMpLm5leHQoKS5zbGlkZVRvZ2dsZSgpO1xyXG4gICAgICAgICAgICB9KVxyXG4gICAgICAgIH0sXHJcbiAgICAgICAgX2FuaW1hdGU6ZnVuY3Rpb24oKXtcclxuICAgICAgICAgICAgdmFyIGVsZW1lbnRzO1xyXG4gICAgICAgICAgICB2YXIgd2luZG93SGVpZ2h0O1xyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gaW5pdCgpIHtcclxuICAgICAgICAgICAgICAgIGVsZW1lbnRzID0gZG9jdW1lbnQucXVlcnlTZWxlY3RvckFsbCgnLmhpZGRlbkVsZW1lbnQnKTtcclxuICAgICAgICAgICAgICAgIHdpbmRvd0hlaWdodCA9IHdpbmRvdy5pbm5lckhlaWdodDtcclxuICAgICAgICAgICAgfVxyXG5cclxuICAgICAgICAgICAgZnVuY3Rpb24gY2hlY2tQb3NpdGlvbigpIHtcclxuICAgICAgICAgICAgICAgIGZvciAodmFyIGkgPSAwOyBpIDwgZWxlbWVudHMubGVuZ3RoOyBpKyspIHtcclxuICAgICAgICAgICAgICAgIHZhciBlbGVtZW50ID0gZWxlbWVudHNbaV07XHJcbiAgICAgICAgICAgICAgICB2YXIgcG9zaXRpb25Gcm9tVG9wID0gZWxlbWVudHNbaV0uZ2V0Qm91bmRpbmdDbGllbnRSZWN0KCkudG9wO1xyXG5cclxuICAgICAgICAgICAgICAgIGlmIChwb3NpdGlvbkZyb21Ub3AgLSB3aW5kb3dIZWlnaHQgPD0gMCkge1xyXG4gICAgICAgICAgICAgICAgICAgIGVsZW1lbnQuY2xhc3NMaXN0LmFkZCgnZmFkZS1pbi1lbGVtZW50Jyk7XHJcbiAgICAgICAgICAgICAgICAgICAgZWxlbWVudC5jbGFzc0xpc3QucmVtb3ZlKCdoaWRkZW5FbGVtZW50Jyk7XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgICAgICB9XHJcbiAgICAgICAgICAgIH1cclxuXHJcbiAgICAgICAgICAgIHdpbmRvdy5hZGRFdmVudExpc3RlbmVyKCdzY3JvbGwnLCBjaGVja1Bvc2l0aW9uKTtcclxuICAgICAgICAgICAgd2luZG93LmFkZEV2ZW50TGlzdGVuZXIoJ3Jlc2l6ZScsIGluaXQpO1xyXG5cclxuICAgICAgICAgICAgaW5pdCgpO1xyXG4gICAgICAgICAgICBjaGVja1Bvc2l0aW9uKCk7XHJcbiAgICAgICAgfVxyXG4gICAgfTtcclxuXHJcbiAgICAkKCBkb2N1bWVudCApLnJlYWR5KGZ1bmN0aW9uKCkge1xyXG4gICAgICAgIGFwcC5pbml0KCk7XHJcbiAgICAgICAgXHJcbiAgICB9KTtcclxuICAgICQod2luZG93KS5vbignbG9hZCcsZnVuY3Rpb24oKXtcclxuXHJcbiAgICB9KTtcclxuICAgICQod2luZG93KS5yZXNpemUoZnVuY3Rpb24oKXtcclxuICAgIH0pO1xyXG4gICAgJCh3aW5kb3cpLnNjcm9sbChmdW5jdGlvbigpe1xyXG4gICAgfSk7XHJcblxyXG5cclxufShqUXVlcnkpKTsiXX0=
